<!-- Generated by tool. DO NOT EDIT. -->
# API Reference
複数の似ている [Job](https://kubernetes.io/ja/docs/concepts/workloads/controllers/job/) や [CronJob](https://kubernetes.io/ja/docs/concepts/workloads/controllers/cron-jobs/) のマニフェストを, 共通部分と差分のペアの形式で効率的に生成するためのカスタムリソースです.

- [CRD PodProfile](#podprofile) は Pod の Spec を共通部分として定義できます.
- [CRD Job](#job) は [Job](https://kubernetes.io/ja/docs/concepts/workloads/controllers/job/) を生成できます. これは [Job](https://kubernetes.io/ja/docs/concepts/workloads/controllers/job/) のパラメータと [CRD PodProfile](#podprofile) に対するパッチを含みます.
- [CRD CronJob](#cronjob) は [CronJob](https://kubernetes.io/ja/docs/concepts/workloads/controllers/cron-jobs/) を生成できます. これは [CronJob](https://kubernetes.io/ja/docs/concepts/workloads/controllers/cron-jobs/) のパラメータと [CRD PodProfile](#podprofile) に対するパッチを含みます.

## Examples
### Example of CronJob
There are [PodProfile](#podprofile) and [CronJob](#cronjob):
``` yaml
apiVersion: pixiv.net/v1
kind: PodProfile
metadata:
  labels:
    app.kubernetes.io/name: k8s-job-wrapper
    app.kubernetes.io/managed-by: kustomize
  name: podprofile-sample
spec:
  template:
    spec:
      containers:
        - name: pi
          image: perl:5.34.0
          command: ["perl", "-Mbignum=bpi", "-wle", "print bpi(500)"]
      restartPolicy: Never
---
apiVersion: pixiv.net/v1
kind: CronJob
metadata:
  labels:
    app.kubernetes.io/name: k8s-job-wrapper
    app.kubernetes.io/managed-by: kustomize
  name: cronjob-sample
spec:
  schedule: "* * * * *"
  jobProfile:
    podProfileRef: podprofile-sample
    patches:
      - op: replace
        path: /spec/containers/0/command
        value: ["perl", "-Mbignum=bpi", "-wle", "print bpi(10)"]
    jobParams:
      activeDeadlineSeconds: 120
```
These manifests will create the following resources:
``` yaml
apiVersion: batch/v1
kind: CronJob
metadata:
  creationTimestamp: "2025-04-21T07:58:23Z"
  generation: 1
  labels:
    app.kubernetes.io/created-by: pixiv-job-controller
    cronjobs.pixiv.net/name: cronjob-sample
  name: cronjob-sample-pxvcjob
  namespace: default
  ownerReferences:
  - apiVersion: pixiv.net/v1
    blockOwnerDeletion: true
    controller: true
    kind: CronJob
    name: cronjob-sample
    uid: 6b35de70-fcd0-4a6d-a35d-5f8cfe08a5de
  resourceVersion: "10603"
  uid: 364495ba-0239-4e7b-9911-f85059726f68
spec:
  concurrencyPolicy: Allow
  failedJobsHistoryLimit: 1
  jobTemplate:
    metadata:
      creationTimestamp: null
    spec:
      activeDeadlineSeconds: 120
      backoffLimit: 6
      completionMode: NonIndexed
      suspend: false
      template:
        metadata:
          creationTimestamp: null
        spec:
          containers:
          - command:
            - perl
            - -Mbignum=bpi
            - -wle
            - print bpi(10)
            image: perl:5.34.0
            imagePullPolicy: IfNotPresent
            name: pi
            resources: {}
            terminationMessagePath: /dev/termination-log
            terminationMessagePolicy: File
          dnsPolicy: ClusterFirst
          restartPolicy: Never
          schedulerName: default-scheduler
          securityContext: {}
          terminationGracePeriodSeconds: 30
  schedule: '* * * * *'
  successfulJobsHistoryLimit: 3
  suspend: false
status:
  lastScheduleTime: "2025-04-21T07:59:00Z"
  lastSuccessfulTime: "2025-04-21T07:59:02Z"
```
### Example of Job
There are [PodProfile](#podprofile) and [Job](#job):
``` yaml
apiVersion: pixiv.net/v1
kind: PodProfile
metadata:
  labels:
    app.kubernetes.io/name: k8s-job-wrapper
    app.kubernetes.io/managed-by: kustomize
  name: podprofile-sample
spec:
  template:
    spec:
      containers:
        - name: pi
          image: perl:5.34.0
          command: ["perl", "-Mbignum=bpi", "-wle", "print bpi(500)"]
      restartPolicy: Never
---
apiVersion: pixiv.net/v1
kind: Job
metadata:
  labels:
    app.kubernetes.io/name: k8s-job-wrapper
    app.kubernetes.io/managed-by: kustomize
  name: job-sample
spec:
  profile:
    podProfileRef: podprofile-sample
    patches:
      - op: replace
        path: /spec/containers/0/command
        value: ["perl", "-Mbignum=bpi", "-wle", "print bpi(100)"]
    jobParams:
      activeDeadlineSeconds: 120
```
These manifests will create the following resources:
``` yaml
apiVersion: batch/v1
kind: Job
metadata:
  creationTimestamp: "2025-04-21T07:58:23Z"
  generation: 1
  labels:
    app.kubernetes.io/created-by: pixiv-job-controller
    jobs.pixiv.net/job-spec-hash: 7dc5d648b9
    jobs.pixiv.net/name: job-sample
    pod-template-hash: 76bbc6b896
  name: job-sample-76bbc6b896
  namespace: default
  ownerReferences:
  - apiVersion: pixiv.net/v1
    blockOwnerDeletion: true
    controller: true
    kind: Job
    name: job-sample
    uid: 6d239c5f-8b88-47d2-8983-5d1b190d90e9
  resourceVersion: "10518"
  uid: 44d44c3f-78d2-416c-8638-3f375dce7aea
spec:
  activeDeadlineSeconds: 120
  backoffLimit: 6
  completionMode: NonIndexed
  completions: 1
  manualSelector: false
  parallelism: 1
  podReplacementPolicy: TerminatingOrFailed
  selector:
    matchLabels:
      batch.kubernetes.io/controller-uid: 44d44c3f-78d2-416c-8638-3f375dce7aea
  suspend: false
  template:
    metadata:
      creationTimestamp: null
      labels:
        batch.kubernetes.io/controller-uid: 44d44c3f-78d2-416c-8638-3f375dce7aea
        batch.kubernetes.io/job-name: job-sample-76bbc6b896
        controller-uid: 44d44c3f-78d2-416c-8638-3f375dce7aea
        job-name: job-sample-76bbc6b896
    spec:
      containers:
      - command:
        - perl
        - -Mbignum=bpi
        - -wle
        - print bpi(100)
        image: perl:5.34.0
        imagePullPolicy: IfNotPresent
        name: pi
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Never
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
status:
  completionTime: "2025-04-21T07:58:26Z"
  conditions:
  - lastProbeTime: "2025-04-21T07:58:26Z"
    lastTransitionTime: "2025-04-21T07:58:26Z"
    message: Reached expected number of succeeded pods
    reason: CompletionsReached
    status: "True"
    type: SuccessCriteriaMet
  - lastProbeTime: "2025-04-21T07:58:26Z"
    lastTransitionTime: "2025-04-21T07:58:26Z"
    message: Reached expected number of succeeded pods
    reason: CompletionsReached
    status: "True"
    type: Complete
  ready: 0
  startTime: "2025-04-21T07:58:23Z"
  succeeded: 1
  terminating: 0
  uncountedTerminatedPods: {}
```

## Packages
- [pixiv.net/v1](#pixivnetv1)


## pixiv.net/v1

Package v1 contains API Schema definitions for the pixivnet v1 API group.

### Resource Types
- [CronJob](#cronjob)
- [CronJobList](#cronjoblist)
- [Job](#job)
- [JobList](#joblist)
- [PodProfile](#podprofile)
- [PodProfileList](#podprofilelist)



#### CronJob



CronJob represents a template of `cronjobs.v1.batch`.

CronJob generates `cronjobs.v1.batch.spec` from `spec.jobProfile`,
and then combines it with `spec.schedule`, `spec.timeZone`, ... to produce `cronjobs.v1.batch`.

The generated `cronjobs.v1.batch` will always have the following labels applied:

  - `app.kubernetes.io/created-by=pixiv-job-controller`
  - `cronjobs.pixiv.net/name=$NAME_OF_CRONJOB`

Where `$NAME_OF_CRONJOB` is the `metadata.name`.

The generated `cronjobs.v1.batch` will have the suffix `-pxvcjob` appended to its name.
The maximum length of `metadata.name` of `cronjobs.v1.batch` is 52 characters.
Therefore, the maximum length of `metadata.name` of [CronJob] is 44 characters.



_Appears in:_
- [CronJobList](#cronjoblist)

| Field | Description | Default | Validation |
| --- | --- | --- | --- |
| `apiVersion` _string_ | `pixiv.net/v1` | | |
| `kind` _string_ | `CronJob` | | |
| `kind` _string_ | Kind is a string value representing the REST resource this object represents.<br />Servers may infer this from the endpoint the client submits requests to.<br />Cannot be updated.<br />In CamelCase.<br />More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds |  |  |
| `apiVersion` _string_ | APIVersion defines the versioned schema of this representation of an object.<br />Servers should convert recognized schemas to the latest internal value, and<br />may reject unrecognized values.<br />More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources |  |  |
| `metadata` _[ObjectMeta](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.32/#objectmeta-v1-meta)_ | Refer to Kubernetes API documentation for fields of `metadata`. |  |  |
| `spec` _[CronJobSpec](#cronjobspec)_ |  |  |  |
| `status` _[CronJobStatus](#cronjobstatus)_ |  |  |  |




#### CronJobList



CronJobList contains a list of CronJob.





| Field | Description | Default | Validation |
| --- | --- | --- | --- |
| `apiVersion` _string_ | `pixiv.net/v1` | | |
| `kind` _string_ | `CronJobList` | | |
| `kind` _string_ | Kind is a string value representing the REST resource this object represents.<br />Servers may infer this from the endpoint the client submits requests to.<br />Cannot be updated.<br />In CamelCase.<br />More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds |  |  |
| `apiVersion` _string_ | APIVersion defines the versioned schema of this representation of an object.<br />Servers should convert recognized schemas to the latest internal value, and<br />may reject unrecognized values.<br />More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources |  |  |
| `metadata` _[ListMeta](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.32/#listmeta-v1-meta)_ | Refer to Kubernetes API documentation for fields of `metadata`. |  |  |
| `items` _[CronJob](#cronjob) array_ |  |  |  |


#### CronJobMetadata







_Appears in:_
- [CronJobSpec](#cronjobspec)

| Field | Description | Default | Validation |
| --- | --- | --- | --- |
| `labels` _object (keys:string, values:string)_ | Additional labels for generated `cronjobs.v1.batch`. |  |  |
| `annotations` _object (keys:string, values:string)_ | Additional annotations for generated `cronjobs.v1.batch`. |  |  |


#### CronJobSpec



CronJobSpec defines the desired state of CronJob.



_Appears in:_
- [CronJob](#cronjob)

| Field | Description | Default | Validation |
| --- | --- | --- | --- |
| `jobProfile` _[JobProfileSpec](#jobprofilespec)_ |  |  |  |
| `cronJobMetadata` _[CronJobMetadata](#cronjobmetadata)_ | Additional `cronjobs.v1.batch.metadata`. |  |  |
| `schedule` _string_ | The schedule in Cron format, see https://en.wikipedia.org/wiki/Cron. |  |  |
| `timeZone` _string_ | The time zone name for the given schedule, see https://en.wikipedia.org/wiki/List_of_tz_database_time_zones.<br />If not specified, this will default to the time zone of the kube-controller-manager process.<br />The set of valid time zone names and the time zone offset is loaded from the system-wide time zone<br />database by the API server during CronJob validation and the controller manager during execution.<br />If no system-wide time zone database can be found a bundled version of the database is used instead.<br />If the time zone name becomes invalid during the lifetime of a CronJob or due to a change in host<br />configuration, the controller will stop creating new new Jobs and will create a system event with the<br />reason UnknownTimeZone.<br />More information can be found in https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/#time-zones |  |  |
| `startingDeadlineSeconds` _integer_ | Optional deadline in seconds for starting the job if it misses scheduled<br />time for any reason.  Missed jobs executions will be counted as failed ones. |  |  |
| `concurrencyPolicy` _[ConcurrencyPolicy](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.32/#concurrencypolicy-v1-batch)_ | Specifies how to treat concurrent executions of a Job.<br />Valid values are:<br />- "Allow" (default): allows CronJobs to run concurrently;<br />- "Forbid": forbids concurrent runs, skipping next run if previous run hasn't finished yet;<br />- "Replace": cancels currently running job and replaces it with a new one | Allow |  |
| `suspend` _boolean_ | This flag tells the controller to suspend subsequent executions, it does<br />not apply to already started executions. Defaults to false. | false |  |
| `successfulJobsHistoryLimit` _integer_ | The number of successful finished jobs to retain.<br />This is a pointer to distinguish between explicit zero and not specified. | 3 |  |
| `failedJobsHistoryLimit` _integer_ | The number of failed finished jobs to retain.<br />This is a pointer to distinguish between explicit zero and not specified. | 1 |  |


#### CronJobStatus



CronJobStatus defines the observed state of CronJob.



_Appears in:_
- [CronJob](#cronjob)

| Field | Description | Default | Validation |
| --- | --- | --- | --- |
| `conditions` _[Condition](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.32/#condition-v1-meta) array_ | Conditions represent the latest available observations of an object's state. |  |  |
| `collisionCount` _integer_ | Count of hash collisions for the Job. The Job controller uses this<br />field as a collision avoidance mechanism when it needs to create the name for the<br />newest `jobs.v1.batch`. |  |  |


#### Job



Job represents a template of `jobs.v1.batch`.

The Job creates a `jobs.v1.batch` manifest from the [PodProfile] specified in `spec.profile.podProfileRef` and `spec.profile.jobParams`, and applies `spec.profile.patches`.
The generated `jobs.v1.batch` will always have the following labels:

  - `app.kubernetes.io/created-by=pixiv-job-controller`
  - `jobs.pixiv.net/name=$NAME_OF_JOB`
  - `jobs.pixiv.net/job-spec-hash=$HASH_OF_JOB_SPEC`

`$NAME_OF_JOB` is the value of `metadata.name`.
`$HASH_OF_JOB_SPEC` is the hash value of `jobs.v1.batch.spec`.

The Job generates a `jobs.v1.batch` in the following cases:

  - When it generates the `jobs.v1.batch` for the first time.
  - When it generates a manifest with a different spec called $HASH_OF_JOB_SPEC from the most recently generated jobs.v1.batch, and it has completed.

The name of the `jobs.v1.batch` to be generated will have an 11-character suffix appended to `metadata.name`.
Therefore, `metadata.name` can be a maximum of 52 characters long.



_Appears in:_
- [JobList](#joblist)

| Field | Description | Default | Validation |
| --- | --- | --- | --- |
| `apiVersion` _string_ | `pixiv.net/v1` | | |
| `kind` _string_ | `Job` | | |
| `kind` _string_ | Kind is a string value representing the REST resource this object represents.<br />Servers may infer this from the endpoint the client submits requests to.<br />Cannot be updated.<br />In CamelCase.<br />More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds |  |  |
| `apiVersion` _string_ | APIVersion defines the versioned schema of this representation of an object.<br />Servers should convert recognized schemas to the latest internal value, and<br />may reject unrecognized values.<br />More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources |  |  |
| `metadata` _[ObjectMeta](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.32/#objectmeta-v1-meta)_ | Refer to Kubernetes API documentation for fields of `metadata`. |  |  |
| `spec` _[JobSpec](#jobspec)_ |  |  |  |
| `status` _[JobStatus](#jobstatus)_ |  |  |  |




#### JobList



JobList contains a list of Job.





| Field | Description | Default | Validation |
| --- | --- | --- | --- |
| `apiVersion` _string_ | `pixiv.net/v1` | | |
| `kind` _string_ | `JobList` | | |
| `kind` _string_ | Kind is a string value representing the REST resource this object represents.<br />Servers may infer this from the endpoint the client submits requests to.<br />Cannot be updated.<br />In CamelCase.<br />More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds |  |  |
| `apiVersion` _string_ | APIVersion defines the versioned schema of this representation of an object.<br />Servers should convert recognized schemas to the latest internal value, and<br />may reject unrecognized values.<br />More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources |  |  |
| `metadata` _[ListMeta](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.32/#listmeta-v1-meta)_ | Refer to Kubernetes API documentation for fields of `metadata`. |  |  |
| `items` _[Job](#job) array_ |  |  |  |


#### JobMetadata







_Appears in:_
- [JobProfileSpec](#jobprofilespec)

| Field | Description | Default | Validation |
| --- | --- | --- | --- |
| `labels` _object (keys:string, values:string)_ | Additional labels for generated `jobs.v1.batch`. |  |  |
| `annotations` _object (keys:string, values:string)_ | Additional annotations for generated `jobs.v1.batch`. |  |  |


#### JobParams



`jobs.v1.batch.spec` without template, ttlSecondsAfterFinished.



_Appears in:_
- [JobProfileSpec](#jobprofilespec)

| Field | Description | Default | Validation |
| --- | --- | --- | --- |
| `parallelism` _integer_ | Specifies the maximum desired number of pods the job should<br />run at any given time. The actual number of pods running in steady state will<br />be less than this number when ((.spec.completions - .status.successful) < .spec.parallelism),<br />i.e. when the work left to do is less than max parallelism.<br />More info: https://kubernetes.io/docs/concepts/workloads/controllers/jobs-run-to-completion/ |  |  |
| `completions` _integer_ | Specifies the desired number of successfully finished pods the<br />job should be run with.  Setting to null means that the success of any<br />pod signals the success of all pods, and allows parallelism to have any positive<br />value.  Setting to 1 means that parallelism is limited to 1 and the success of that<br />pod signals the success of the job.<br />More info: https://kubernetes.io/docs/concepts/workloads/controllers/jobs-run-to-completion/ |  |  |
| `activeDeadlineSeconds` _integer_ | Specifies the duration in seconds relative to the startTime that the job<br />may be continuously active before the system tries to terminate it; value<br />must be positive integer. If a Job is suspended (at creation or through an<br />update), this timer will effectively be stopped and reset when the Job is<br />resumed again. |  |  |
| `podFailurePolicy` _[PodFailurePolicy](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.32/#podfailurepolicy-v1-batch)_ | Specifies the policy of handling failed pods. In particular, it allows to<br />specify the set of actions and conditions which need to be<br />satisfied to take the associated action.<br />If empty, the default behaviour applies - the counter of failed pods,<br />represented by the jobs's .status.failed field, is incremented and it is<br />checked against the backoffLimit. This field cannot be used in combination<br />with restartPolicy=OnFailure. |  |  |
| `successPolicy` _[SuccessPolicy](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.32/#successpolicy-v1-batch)_ | successPolicy specifies the policy when the Job can be declared as succeeded.<br />If empty, the default behavior applies - the Job is declared as succeeded<br />only when the number of succeeded pods equals to the completions.<br />When the field is specified, it must be immutable and works only for the Indexed Jobs.<br />Once the Job meets the SuccessPolicy, the lingering pods are terminated.<br />This field is beta-level. To use this field, you must enable the<br />`JobSuccessPolicy` feature gate (enabled by default). |  |  |
| `backoffLimit` _integer_ | Specifies the number of retries before marking this job failed.<br />Defaults to 6 | 6 |  |
| `backoffLimitPerIndex` _integer_ | Specifies the limit for the number of retries within an<br />index before marking this index as failed. When enabled the number of<br />failures per index is kept in the pod's<br />batch.kubernetes.io/job-index-failure-count annotation. It can only<br />be set when Job's completionMode=Indexed, and the Pod's restart<br />policy is Never. The field is immutable.<br />This field is beta-level. It can be used when the `JobBackoffLimitPerIndex`<br />feature gate is enabled (enabled by default). |  |  |
| `maxFailedIndexes` _integer_ | Specifies the maximal number of failed indexes before marking the Job as<br />failed, when backoffLimitPerIndex is set. Once the number of failed<br />indexes exceeds this number the entire Job is marked as Failed and its<br />execution is terminated. When left as null the job continues execution of<br />all of its indexes and is marked with the `Complete` Job condition.<br />It can only be specified when backoffLimitPerIndex is set.<br />It can be null or up to completions. It is required and must be<br />less than or equal to 10^4 when is completions greater than 10^5.<br />This field is beta-level. It can be used when the `JobBackoffLimitPerIndex`<br />feature gate is enabled (enabled by default). |  |  |
| `selector` _[LabelSelector](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.32/#labelselector-v1-meta)_ | A label query over pods that should match the pod count.<br />Normally, the system sets this field for you.<br />More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#label-selectors |  |  |
| `manualSelector` _boolean_ | manualSelector controls generation of pod labels and pod selectors.<br />Leave `manualSelector` unset unless you are certain what you are doing.<br />When false or unset, the system pick labels unique to this job<br />and appends those labels to the pod template.  When true,<br />the user is responsible for picking unique labels and specifying<br />the selector.  Failure to pick a unique label may cause this<br />and other jobs to not function correctly.  However, You may see<br />`manualSelector=true` in jobs that were created with the old `extensions/v1beta1`<br />API.<br />More info: https://kubernetes.io/docs/concepts/workloads/controllers/jobs-run-to-completion/#specifying-your-own-pod-selector |  |  |
| `ttlSecondsAfterFinished` _integer_ | ttlSecondsAfterFinished limits the lifetime of a Job that has finished<br />execution (either Complete or Failed). If this field is set,<br />ttlSecondsAfterFinished after the Job finishes, it is eligible to be<br />automatically deleted. When the Job is being deleted, its lifecycle<br />guarantees (e.g. finalizers) will be honored. If this field is unset,<br />the Job won't be automatically deleted. If this field is set to zero,<br />the Job becomes eligible to be deleted immediately after it finishes.<br />When CRD [Job] uses this, even if the TTL is expired, one [Job](https://kubernetes.io/ja/docs/concepts/workloads/controllers/job/) will remain. It will be reflected in<br />the `jobs.pixiv.net/ttl-seconds-after-finished` annotation instead of `jobs.v1.batch.spec.ttlSecondsAfterFinished`. |  |  |
| `completionMode` _[CompletionMode](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.32/#completionmode-v1-batch)_ | completionMode specifies how Pod completions are tracked. It can be<br />`NonIndexed` (default) or `Indexed`.<br />`NonIndexed` means that the Job is considered complete when there have<br />been .spec.completions successfully completed Pods. Each Pod completion is<br />homologous to each other.<br />`Indexed` means that the Pods of a<br />Job get an associated completion index from 0 to (.spec.completions - 1),<br />available in the annotation batch.kubernetes.io/job-completion-index.<br />The Job is considered complete when there is one successfully completed Pod<br />for each index.<br />When value is `Indexed`, .spec.completions must be specified and<br />`.spec.parallelism` must be less than or equal to 10^5.<br />In addition, The Pod name takes the form<br />`$(job-name)-$(index)-$(random-string)`,<br />the Pod hostname takes the form `$(job-name)-$(index)`.<br />More completion modes can be added in the future.<br />If the Job controller observes a mode that it doesn't recognize, which<br />is possible during upgrades due to version skew, the controller<br />skips updates for the Job. | NonIndexed |  |
| `suspend` _boolean_ | suspend specifies whether the Job controller should create Pods or not. If<br />a Job is created with suspend set to true, no Pods are created by the Job<br />controller. If a Job is suspended after creation (i.e. the flag goes from<br />false to true), the Job controller will delete all active Pods associated<br />with this Job. Users must design their workload to gracefully handle this.<br />Suspending a Job will reset the StartTime field of the Job, effectively<br />resetting the ActiveDeadlineSeconds timer too. Defaults to false. | false |  |
| `podReplacementPolicy` _[PodReplacementPolicy](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.32/#podreplacementpolicy-v1-batch)_ | podReplacementPolicy specifies when to create replacement Pods.<br />Possible values are:<br />- TerminatingOrFailed means that we recreate pods<br />  when they are terminating (has a metadata.deletionTimestamp) or failed.<br />- Failed means to wait until a previously created Pod is fully terminated (has phase<br />  Failed or Succeeded) before creating a replacement Pod.<br />When using podFailurePolicy, Failed is the the only allowed value.<br />TerminatingOrFailed and Failed are allowed values when podFailurePolicy is not in use.<br />This is an beta field. To use this, enable the JobPodReplacementPolicy feature toggle.<br />This is on by default. |  |  |
| `managedBy` _string_ | ManagedBy field indicates the controller that manages a Job. The k8s Job<br />controller reconciles jobs which don't have this field at all or the field<br />value is the reserved string `kubernetes.io/job-controller`, but skips<br />reconciling Jobs with a custom value for this field.<br />The value must be a valid domain-prefixed path (e.g. acme.io/foo) -<br />all characters before the first "/" must be a valid subdomain as defined<br />by RFC 1123. All characters trailing the first "/" must be valid HTTP Path<br />characters as defined by RFC 3986. The value cannot exceed 63 characters.<br />This field is immutable.<br />This field is alpha-level. The job controller accepts setting the field<br />when the feature gate JobManagedBy is enabled (disabled by default). |  |  |


#### JobPatch



JobPatch defines the [patch] to be applied to template of PodProfile.
For examples, rename container:
<pre><code>op: replace
path: /spec/containers/0/name
value: simple
</code></pre>

Replace command:
<pre><code>op: replace
path: /spec/containers/0/command
value: ["perl", "-Mbignum=bpi", "-wle", "print bpi(100)"]
</code></pre>

[patch]: https://datatracker.ietf.org/doc/html/rfc6902



_Appears in:_
- [JobProfileSpec](#jobprofilespec)

| Field | Description | Default | Validation |
| --- | --- | --- | --- |
| `op` _string_ | Operation to perform. |  |  |
| `path` _string_ | JSON-pointer that references a location within the template where the operation is performed.<br />The root of path will be `jobs.v1.batch.spec.template`. |  |  |
| `value` _[JSON](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.32/#json-v1-apiextensions-k8s-io)_ | Any yaml object. |  |  |
| `from` _string_ |  |  |  |


#### JobProfileSpec







_Appears in:_
- [CronJobSpec](#cronjobspec)
- [JobSpec](#jobspec)

| Field | Description | Default | Validation |
| --- | --- | --- | --- |
| `podProfileRef` _string_ | Name of [PodProfile] that this refers to. |  |  |
| `patches` _[JobPatch](#jobpatch) array_ | Patches to be applied to `template` of [PodProfile]. |  |  |
| `jobParams` _[JobParams](#jobparams)_ | `jobs.v1.batch.spec` configuration options. |  |  |
| `jobMetadata` _[JobMetadata](#jobmetadata)_ | Additional `jobs.v1.batch.metadata`. |  |  |


#### JobSpec



JobSpec defines the desired state of Job.



_Appears in:_
- [Job](#job)

| Field | Description | Default | Validation |
| --- | --- | --- | --- |
| `profile` _[JobProfileSpec](#jobprofilespec)_ |  |  |  |
| `jobsHistoryLimit` _integer_ | JobsHistoryLimit is the number of jobs to retain.<br />Value must be non-negative integer.<br />Default is 3. | 3 |  |


#### JobStatus



JobStatus defines the observed state of Job.



_Appears in:_
- [Job](#job)

| Field | Description | Default | Validation |
| --- | --- | --- | --- |
| `conditions` _[Condition](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.32/#condition-v1-meta) array_ | Conditions represent the latest available observations of an object's state. |  |  |
| `collisionCount` _integer_ | Count of hash collisions for the Job. The Job controller uses this<br />field as a collision avoidance mechanism when it needs to create the name for the<br />newest `jobs.v1.batch`. |  |  |


#### PodProfile



PodProfile represents the configuration of a Pod.



_Appears in:_
- [PodProfileList](#podprofilelist)

| Field | Description | Default | Validation |
| --- | --- | --- | --- |
| `apiVersion` _string_ | `pixiv.net/v1` | | |
| `kind` _string_ | `PodProfile` | | |
| `kind` _string_ | Kind is a string value representing the REST resource this object represents.<br />Servers may infer this from the endpoint the client submits requests to.<br />Cannot be updated.<br />In CamelCase.<br />More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds |  |  |
| `apiVersion` _string_ | APIVersion defines the versioned schema of this representation of an object.<br />Servers should convert recognized schemas to the latest internal value, and<br />may reject unrecognized values.<br />More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources |  |  |
| `metadata` _[ObjectMeta](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.32/#objectmeta-v1-meta)_ | Refer to Kubernetes API documentation for fields of `metadata`. |  |  |
| `spec` _[PodProfileSpec](#podprofilespec)_ |  |  |  |
| `status` _[PodProfileStatus](#podprofilestatus)_ |  |  |  |


#### PodProfileList



PodProfileList contains a list of PodProfile.





| Field | Description | Default | Validation |
| --- | --- | --- | --- |
| `apiVersion` _string_ | `pixiv.net/v1` | | |
| `kind` _string_ | `PodProfileList` | | |
| `kind` _string_ | Kind is a string value representing the REST resource this object represents.<br />Servers may infer this from the endpoint the client submits requests to.<br />Cannot be updated.<br />In CamelCase.<br />More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds |  |  |
| `apiVersion` _string_ | APIVersion defines the versioned schema of this representation of an object.<br />Servers should convert recognized schemas to the latest internal value, and<br />may reject unrecognized values.<br />More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources |  |  |
| `metadata` _[ListMeta](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.32/#listmeta-v1-meta)_ | Refer to Kubernetes API documentation for fields of `metadata`. |  |  |
| `items` _[PodProfile](#podprofile) array_ |  |  |  |


#### PodProfileSpec



PodProfileSpec defines the desired state of PodProfile.



_Appears in:_
- [PodProfile](#podprofile)

| Field | Description | Default | Validation |
| --- | --- | --- | --- |
| `template` _[PodTemplateSpec](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.32/#podtemplatespec-v1-core)_ | Template describes the pods that will be created. |  |  |


#### PodProfileStatus



PodProfileStatus defines the observed state of PodProfile.



_Appears in:_
- [PodProfile](#podprofile)



<script>
//
// Examples 内部のコードブロックの中の特定の語句を強調する
//
// NOTE: Examples セクションの配下にしぼってないので別の場所のコードブロックにも適用される
//
document.addEventListener('DOMContentLoaded', function() {
  const emphasizeTargets = [
    'apiVersion: pixiv.net/v1',
    'jobProfile',
    'podProfileRef',
    'patches',
    'jobParams',
  ];

  const codeElements = document.querySelectorAll('code');
  codeElements.forEach(codeElement => {
    const spanElements = codeElement.querySelectorAll('span');
    spanElements.forEach(spanElement => {
      const text = spanElement.textContent.trim();
      if (emphasizeTargets.includes(text)) {
        spanElement.style.fontWeight = 'bold';
        spanElement.style.fontStyle = 'italic';
      }
    });
  });
});
</script>
